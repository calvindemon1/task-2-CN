<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PINJAMAN</title>
    <link rel="stylesheet" href="CSS/style.css">
</head>

<body>
    <p><a href="http://task-2-cn.test/task-2.html">Kembali</a></p>
    <h4>Jumlah maksimal pinjaman Rp 10.000.000.00</h4>

    <h4 id="jmluang"></h4>
    <input type="text" id="uang" placeholder="Silahkan masukkan nominal pinjaman">
    <button id="btnpinjam">Pinjam</button>

    <table class="mt-3">
        <thead>
            <tr>
                <th>No.</th>
                <th>Jumlah Uang</th>
                <th>Tanggal</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="cell1"></td>
                <td id="cell2"></td>
                <td id="cell3"></td>
            </tr>
        </tbody>
    </table>

    <script>
        let jmluang = document.getElementById("jmluang");
        let form = document.getElementById("formpinjam");
        let btnpinjam = document.getElementById("btnpinjam");
        let uang = document.getElementById("uang");
        let cell1 = document.getElementById("cell1");
        let cell2 = document.getElementById("cell2");
        let cell3 = document.getElementById("cell3");

        let indoidr = Intl.NumberFormat("en-ID", {
            style: "currency",
            currency: "IDR",
        });

        let jml = 10000000;

        let arr = [];

        btnpinjam.addEventListener('click', () => {
            if (isNaN(uang.value)) {
                alert("Silahkan masukkan angka!");
                return uang.value;

            } else {
                if (parseFloat(uang.value) > jml) {
                    alert("Sudah mencapai batas pinjaman!");
                    return uang.value = '';
                }

                else {
                    let obj = {};

                    obj.name = uang.value;

                    arr.push(obj);
                    jml -= (Number(uang.value));
                    jmluang.innerHTML = indoidr.format(jml);

                    cell1.innerHTML = '';
                    cell2.innerHTML = '';
                    cell3.innerHTML = '';

                    for (let x = 0; x < arr.length; x++) {
                        cell1.innerHTML += (x + 1) + "<br>";
                        cell2.innerHTML += indoidr.format(arr[x].name) + "<br>";
                        const tgl = new Date();
                        const dd = tgl.getDate(),
                            mm = tgl.getMonth(),
                            yyyy = tgl.getFullYear(),
                            date = dd + "-" + mm + "-" + yyyy;
                        cell3.innerHTML += date + "<br>";
                    }

                    return uang.value = '';
                }
            }
        });
        jmluang.innerHTML = indoidr.format(jml);
    </script>
</body>

</html>